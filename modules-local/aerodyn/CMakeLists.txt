
generate_f90_types(src/AeroDyn_Registry.txt AeroDyn_Types.f90)
generate_f90_types(src/AirfoilInfo_Registry.txt AirfoilInfo_Types.f90 -noextrap)
generate_f90_types(src/BEMT_Registry.txt BEMT_Types.f90)
generate_f90_types(src/UnsteadyAero_Registry.txt UnsteadyAero_Types.f90)

generate_f90_types(src/AeroDyn_Driver_Registry.txt
  AeroDyn_Driver_Types.f90 -noextrap)

set(AD_LIBS_SOURCES
  src/AeroDyn.f90
  src/AeroDyn_IO.f90
  src/AirfoilInfo.f90
  src/BEMT.f90
  src/BEMTUncoupled.f90
  src/UnsteadyAero.f90
  src/fmin_fcn.f90
  src/mod_root1dim.f90

  # Autogenerated files
  AeroDyn_Types.f90
  AirfoilInfo_Types.f90
  BEMT_Types.f90
  UnsteadyAero_Types.f90
  )

add_library(aerodynlib ${AD_LIBS_SOURCES})
target_link_libraries(aerodynlib nwtclibs)

set(AD_DRIVER_SOURCES
  src/AeroDyn_Driver.f90
  src/AeroDyn_Driver_Subs.f90

  # Autogenerated files
  AeroDyn_Driver_Types.f90)

add_executable(aerodyn ${AD_DRIVER_SOURCES})
target_link_libraries(aerodyn aerodynlib nwtclibs ${CMAKE_DL_LIBS})

install(TARGETS aerodyn aerodynlib
  RUNTIME DESTINATION bin
  LIBRARY DESTINATION lib
  ARCHIVE DESTINATION lib)
